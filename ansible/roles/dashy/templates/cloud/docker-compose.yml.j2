services:
  {{ dashy_container_name }}:
    image: {{ dashy_image }}
    container_name: {{ dashy_container_name }}
    restart: unless-stopped
    volumes:
      - {{ dashy_service_dir }}/config:/app/user-data
    networks:
      - pangolin
    labels:
      traefik.enable: "true"
      traefik.docker.network: "pangolin"
      traefik.http.routers.dashy.rule: Host(`DASHY_PUBLIC_DOMAIN`)
      traefik.http.routers.dashy.entrypoints: https
      traefik.http.routers.dashy.tls.certresolver: cloudflare
      traefik.http.services.dashy.loadbalancer.server.port: 80

networks:
  pangolin:
    external: true
